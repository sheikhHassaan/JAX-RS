


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > InventoryServiceImpl</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">Services</a>
</div>

<h1>Coverage Summary for Class: InventoryServiceImpl (Services)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">InventoryServiceImpl</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (20/20)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    93.3%
  </span>
  <span class="absValue">
    (224/240)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package Services;
&nbsp;
&nbsp;import Common.HikariConnection;
&nbsp;import Common.ConnectionNotFoundException;
&nbsp;import Domain.Category;
&nbsp;import Domain.Inventory;
&nbsp;import Domain.Location;
&nbsp;import java.sql.Connection;
&nbsp;import java.sql.PreparedStatement;
&nbsp;import java.sql.ResultSet;
&nbsp;import java.sql.SQLException;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.UUID;
&nbsp;import static Services.Queries.*;
&nbsp;
&nbsp;public class InventoryServiceImpl implements InventoryService{
&nbsp;    public static InventoryServiceImpl inventoryService;
&nbsp;    Connection connection;
&nbsp;
<b class="fc">&nbsp;    private InventoryServiceImpl(){</b>
<b class="fc">&nbsp;        connection = null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static InventoryServiceImpl getInstance() {
<b class="fc">&nbsp;        if (inventoryService == null){</b>
<b class="fc">&nbsp;            inventoryService = new InventoryServiceImpl();</b>
&nbsp;        }
<b class="fc">&nbsp;        return inventoryService;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean doesCategoryExist(UUID cat_id, Connection connection) throws SQLException {
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try{
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(DOES_CATEGORY_ID_EXIST);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(cat_id));</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
<b class="fc">&nbsp;            int count = resultSet.getInt(1);</b>
<b class="fc">&nbsp;            return count &gt; 0;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public UUID doesCategoryExist(String cat_name, Connection connection) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(DOES_CATEGORY_EXIST);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, cat_name);</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
<b class="fc">&nbsp;            int count = resultSet.getInt(1);</b>
<b class="fc">&nbsp;            if (count &gt; 0){</b>
<b class="fc">&nbsp;                return getCategoryIdByName(cat_name, connection);</b>
&nbsp;            }
<b class="fc">&nbsp;            return null;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public boolean doesLocationExist(UUID loc_id, Connection connection) throws SQLException {
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try{
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(DOES_LOCATION_ID_EXIST);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(loc_id));</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
<b class="fc">&nbsp;            int count = resultSet.getInt(1);</b>
<b class="fc">&nbsp;            return count &gt; 0;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public UUID doesLocationExist(String loc_name, Connection connection) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(DOES_LOCATION_EXIST);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, loc_name);</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
<b class="fc">&nbsp;            int count = resultSet.getInt(1);</b>
<b class="fc">&nbsp;            if (count &gt; 0){</b>
<b class="fc">&nbsp;                return getLocationIdByName(loc_name, connection);</b>
&nbsp;            }
<b class="fc">&nbsp;            return null;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public UUID getCategoryIdByName(String cat_name, Connection connection) throws SQLException {
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        String id;
&nbsp;        try {
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(GET_CATEGORY_ID_BY_NAME);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, cat_name);</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
<b class="fc">&nbsp;            id = resultSet.getString(1);</b>
<b class="fc">&nbsp;            if (id != null)</b>
<b class="fc">&nbsp;                return UUID.fromString(id);</b>
&nbsp;            else
<b class="nc">&nbsp;                return null;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public UUID getLocationIdByName(String loc_name, Connection connection) throws SQLException {
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(GET_LOCATION_ID_BY_NAME);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, loc_name);</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
&nbsp;
<b class="fc">&nbsp;            return UUID.fromString(resultSet.getString(1));</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public Category addCategory(String cat_name, Connection connection) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        Category category = new Category();</b>
<b class="fc">&nbsp;        UUID cat_id = doesCategoryExist(cat_name, connection);</b>
<b class="fc">&nbsp;        if(cat_id == null){   //!doesCategoryExist(cat_name)</b>
<b class="fc">&nbsp;            UUID id = UUID.randomUUID();</b>
&nbsp;            try {
<b class="fc">&nbsp;                PreparedStatement preparedStatement = connection.prepareStatement(INSERT_CATEGORY);</b>
<b class="fc">&nbsp;                preparedStatement.setString(1, String.valueOf(id));</b>
<b class="fc">&nbsp;                preparedStatement.setString(2, cat_name);</b>
<b class="fc">&nbsp;                int rowsEffected = preparedStatement.executeUpdate();</b>
<b class="fc">&nbsp;                if (rowsEffected &gt; 0) {</b>
<b class="fc">&nbsp;                    category.setCategory_id(id);</b>
<b class="fc">&nbsp;                    category.setCategory_name(cat_name);</b>
&nbsp;                }
<b class="fc">&nbsp;                return category;</b>
&nbsp;            } finally {}
&nbsp;        } else {
<b class="fc">&nbsp;            category.setCategory_id(cat_id);</b>
<b class="fc">&nbsp;            category.setCategory_name(cat_name);</b>
<b class="fc">&nbsp;            return category;</b>
&nbsp;        }
&nbsp;    }
&nbsp;    @Override
&nbsp;    public Location addLocation(String loc_name, Connection connection) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        Location location = new Location();</b>
<b class="fc">&nbsp;        UUID loc_id = doesLocationExist(loc_name, connection);</b>
<b class="fc">&nbsp;        if(loc_id == null){   // !doesLocationExist(loc_name)</b>
<b class="fc">&nbsp;            UUID id = UUID.randomUUID();</b>
&nbsp;            try {
<b class="fc">&nbsp;                PreparedStatement preparedStatement = connection.prepareStatement(INSERT_LOCATION);</b>
<b class="fc">&nbsp;                preparedStatement.setString(1, String.valueOf(id));</b>
<b class="fc">&nbsp;                preparedStatement.setString(2, loc_name);</b>
<b class="fc">&nbsp;                int rowsEffected = preparedStatement.executeUpdate();</b>
<b class="fc">&nbsp;                if (rowsEffected &gt; 0){</b>
<b class="fc">&nbsp;                    location.setLocation_id(id);</b>
<b class="fc">&nbsp;                    location.setLocation_name(loc_name);</b>
&nbsp;                }
<b class="fc">&nbsp;                return location;</b>
&nbsp;            } finally {}
&nbsp;        } else {
<b class="fc">&nbsp;            location.setLocation_id(loc_id);</b>
<b class="fc">&nbsp;            location.setLocation_name(loc_name);</b>
<b class="fc">&nbsp;            return location;</b>
&nbsp;        }
&nbsp;    }
&nbsp;    @Override
&nbsp;    public boolean updateCategory(Category category, Connection connection) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        UUID cat_id = doesCategoryExist(category.getCategory_name(), connection);</b>
<b class="fc">&nbsp;        if (cat_id != null) {</b>
<b class="fc">&nbsp;            category.setCategory_id(cat_id);</b>
&nbsp;            try {
<b class="fc">&nbsp;                PreparedStatement preparedStatement = connection.prepareStatement(UPDATE_CATEGORY);</b>
<b class="fc">&nbsp;                preparedStatement.setString(1, category.getCategory_name());</b>
<b class="fc">&nbsp;                preparedStatement.setString(2, String.valueOf(category.getCategory_id()));</b>
<b class="fc">&nbsp;                int rowsEffected = preparedStatement.executeUpdate();</b>
<b class="fc">&nbsp;                return rowsEffected &gt; 0;</b>
&nbsp;            } finally {}
&nbsp;        } else {
<b class="fc">&nbsp;            return false;   // NOTE: The record doesn&#39;t exist.</b>
&nbsp;        }
&nbsp;    }
&nbsp;    @Override
&nbsp;    public boolean updateLocation(Location location, Connection connection) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        UUID loc_id = doesLocationExist(location.getLocation_name(), connection);</b>
<b class="fc">&nbsp;        if (loc_id != null) {</b>
<b class="fc">&nbsp;            location.setLocation_id(loc_id);</b>
&nbsp;            try {
<b class="fc">&nbsp;                PreparedStatement preparedStatement = connection.prepareStatement(UPDATE_LOCATION);</b>
<b class="fc">&nbsp;                preparedStatement.setString(1, location.getLocation_name());</b>
<b class="fc">&nbsp;                preparedStatement.setString(2, String.valueOf(location.getLocation_id()));</b>
<b class="fc">&nbsp;                int rowsEffected = preparedStatement.executeUpdate();</b>
<b class="fc">&nbsp;                return rowsEffected &gt; 0;</b>
&nbsp;            } finally {}
&nbsp;        } else {
<b class="fc">&nbsp;            return false;   // NOTE: The record doesn&#39;t exist.</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    @Override
&nbsp;    public ArrayList&lt;Inventory&gt; fetchAll() throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
&nbsp;
<b class="fc">&nbsp;        ArrayList&lt;Inventory&gt; inventories = new ArrayList&lt;&gt;();</b>
&nbsp;        Inventory inventory;
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(SELECT_ALL_DATA);</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
&nbsp;
<b class="fc">&nbsp;            while(resultSet.next()){</b>
&nbsp;
<b class="fc">&nbsp;                inventory = new Inventory(resultSet);</b>
<b class="fc">&nbsp;                inventories.add(inventory);</b>
&nbsp;            }
<b class="fc">&nbsp;            return inventories;</b>
&nbsp;
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="fc">&nbsp;            if (connection != null &amp;&amp; !connection.isClosed()){</b>
<b class="fc">&nbsp;                connection.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public Inventory fetchByID(UUID uuid) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
&nbsp;
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(SELECT_BY_ID);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(uuid));</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            resultSet.next();</b>
<b class="fc">&nbsp;            return new Inventory(resultSet);</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="fc">&nbsp;            if (connection != null &amp;&amp; !connection.isClosed()){</b>
<b class="fc">&nbsp;                connection.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public ArrayList&lt;Inventory&gt; fetchAllByCategory(UUID uuid) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        ArrayList&lt;Inventory&gt; inventories = new ArrayList&lt;&gt;();</b>
&nbsp;        Inventory inventory;
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(SELECT_ALL_BY_CATEGORY);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(uuid));</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            while(resultSet.next()){</b>
<b class="fc">&nbsp;                inventory = new Inventory(resultSet);</b>
<b class="fc">&nbsp;                inventories.add(inventory);</b>
&nbsp;            }
<b class="fc">&nbsp;            return inventories;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="fc">&nbsp;            if (connection != null &amp;&amp; !connection.isClosed()){</b>
<b class="fc">&nbsp;                connection.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public ArrayList&lt;Inventory&gt; fetchAllByLocation(UUID uuid) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        ArrayList&lt;Inventory&gt; inventories = new ArrayList&lt;&gt;();</b>
&nbsp;        Inventory inventory;
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(SELECT_ALL_BY_LOCATION);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(uuid));</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            while(resultSet.next()){</b>
<b class="fc">&nbsp;                inventory = new Inventory(resultSet);</b>
<b class="fc">&nbsp;                inventories.add(inventory);</b>
&nbsp;            }
<b class="fc">&nbsp;            return inventories;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="fc">&nbsp;            if (connection != null &amp;&amp; !connection.isClosed()){</b>
<b class="fc">&nbsp;                connection.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public ArrayList&lt;Inventory&gt; fetchAllByLocationAndCategory(UUID loc_id, UUID cat_id) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        ArrayList&lt;Inventory&gt; inventories = new ArrayList&lt;&gt;();</b>
&nbsp;        Inventory inventory;
<b class="fc">&nbsp;        ResultSet resultSet = null;</b>
&nbsp;        try {
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(SELECT_ALL_BY_LOCATION_AND_CATEGORY);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(loc_id));</b>
<b class="fc">&nbsp;            preparedStatement.setString(2, String.valueOf(cat_id));</b>
<b class="fc">&nbsp;            resultSet = preparedStatement.executeQuery();</b>
<b class="fc">&nbsp;            while(resultSet.next()){</b>
<b class="fc">&nbsp;                inventory = new Inventory(resultSet);</b>
<b class="fc">&nbsp;                inventories.add(inventory);</b>
&nbsp;            }
<b class="fc">&nbsp;            return inventories;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (resultSet != null &amp;&amp; !resultSet.isClosed()){</b>
<b class="fc">&nbsp;                resultSet.close();</b>
&nbsp;            }
<b class="fc">&nbsp;            if (connection != null &amp;&amp; !connection.isClosed()){</b>
<b class="fc">&nbsp;                connection.close();</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public Inventory addInventory(Inventory inv) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
&nbsp;
<b class="fc">&nbsp;        Inventory inventory = new Inventory();</b>
&nbsp;        try {
&nbsp;
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
&nbsp;
<b class="fc">&nbsp;            inventory.setItem_category(addCategory(inv.getItem_category().getCategory_name(), connection));</b>
<b class="fc">&nbsp;            inventory.setItem_location(addLocation(inv.getItem_location().getLocation_name(), connection));</b>
&nbsp;
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(INSERT_INVENTORY);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(inv.getId()));</b>
<b class="fc">&nbsp;            preparedStatement.setString(2, inv.getItem_name());</b>
<b class="fc">&nbsp;            preparedStatement.setInt(3, inv.getItem_quantity());</b>
<b class="fc">&nbsp;            preparedStatement.setString(4, String.valueOf(inventory.getItem_category().getCategory_id()));</b>
<b class="fc">&nbsp;            preparedStatement.setString(5, String.valueOf(inventory.getItem_location().getLocation_id()));</b>
&nbsp;
<b class="fc">&nbsp;            if (preparedStatement.executeUpdate() &gt; 0){</b>
<b class="fc">&nbsp;                inventory.setId(inv.getId());</b>
<b class="fc">&nbsp;                inventory.setItem_name(inv.getItem_name());</b>
<b class="fc">&nbsp;                inventory.setItem_quantity(inv.getItem_quantity());</b>
&nbsp;            }
<b class="fc">&nbsp;            return inventory;</b>
&nbsp;            } finally {
<b class="fc">&nbsp;                if (connection != null &amp;&amp; !connection.isClosed()){</b>
<b class="fc">&nbsp;                    connection.close();</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public Inventory updateInventory(Inventory inventory) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
<b class="fc">&nbsp;        Category category = new Category(inventory.getItem_category().getCategory_name());</b>
<b class="fc">&nbsp;        Location location = new Location(inventory.getItem_location().getLocation_name());</b>
<b class="fc">&nbsp;        connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            if (updateCategory(inventory.getItem_category(), connection)) {</b>
<b class="fc">&nbsp;                if (updateLocation(inventory.getItem_location(), connection)) {</b>
&nbsp;                    try {
<b class="fc">&nbsp;                        PreparedStatement preparedStatement = connection.prepareStatement(UPDATE_INVENTORY);</b>
<b class="fc">&nbsp;                        preparedStatement.setString(1, inventory.getItem_name());</b>
<b class="fc">&nbsp;                        preparedStatement.setInt(2, inventory.getItem_quantity());</b>
<b class="fc">&nbsp;                        preparedStatement.setString(3, String.valueOf(inventory.getItem_category().getCategory_id()));</b>
<b class="fc">&nbsp;                        preparedStatement.setString(4, String.valueOf(inventory.getItem_location().getLocation_id()));</b>
<b class="fc">&nbsp;                        preparedStatement.setString(5, String.valueOf(inventory.getId()));</b>
<b class="fc">&nbsp;                        int rowsEffected = preparedStatement.executeUpdate();</b>
<b class="fc">&nbsp;                        if (rowsEffected &gt; 0){</b>
<b class="fc">&nbsp;                            category.setCategory_id(getCategoryIdByName(category.getCategory_name(), connection));</b>
<b class="fc">&nbsp;                            location.setLocation_id(getLocationIdByName(location.getLocation_name(), connection));</b>
&nbsp;
<b class="fc">&nbsp;                            inventory.setItem_category(category);</b>
<b class="fc">&nbsp;                            inventory.setItem_location(location);</b>
<b class="fc">&nbsp;                            return inventory;</b>
&nbsp;                        }
&nbsp;                    } finally {
<b class="fc">&nbsp;                        if (connection != null &amp;&amp; !connection.isClosed()) {</b>
<b class="fc">&nbsp;                            connection.close();</b>
&nbsp;                        }
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                } else { System.out.println(&quot;Location couldn&#39;t be updated.&quot;); }</b>
<b class="nc">&nbsp;            } else { System.out.println(&quot;Category couldn&#39;t be updated.&quot;); }</b>
<b class="fc">&nbsp;            return null;</b>
&nbsp;    }
&nbsp;    @Override
&nbsp;    public boolean delete(UUID inventory_id) throws SQLException, ClassNotFoundException, ConnectionNotFoundException {
&nbsp;        // note: no cascade delete.
&nbsp;        try {
<b class="fc">&nbsp;            connection = HikariConnection.getPooledConnection();</b>
<b class="fc">&nbsp;            PreparedStatement preparedStatement = connection.prepareStatement(DELETE_INVENTORY);</b>
<b class="fc">&nbsp;            preparedStatement.setString(1, String.valueOf(inventory_id));</b>
<b class="fc">&nbsp;            int rowsEffected = preparedStatement.executeUpdate();</b>
<b class="fc">&nbsp;            return rowsEffected &gt; 0;</b>
&nbsp;        } finally {
<b class="fc">&nbsp;            if (connection != null &amp;&amp; !connection.isClosed()) {</b>
<b class="fc">&nbsp;                connection.close();</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-01-19 18:26</div>
</div>
</body>
</html>
